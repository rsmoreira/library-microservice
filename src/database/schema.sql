--------------------------------------------------------
--  Arquivo criado - Domingo-Novembro-20-2016   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence BOOK_ID_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "LIBRARY_TUTORIAL"."BOOK_ID_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1020 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence PATRON_ID_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "LIBRARY_TUTORIAL"."PATRON_ID_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1020 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TRANSACTION_ID_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "LIBRARY_TUTORIAL"."TRANSACTION_ID_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1040 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Table BOOKS
--------------------------------------------------------

  CREATE TABLE "LIBRARY_TUTORIAL"."BOOKS" 
   (	"BOOK_ID" VARCHAR2(20 BYTE), 
	"TITLE" VARCHAR2(50 BYTE), 
	"AUTHOR_LAST_NAME" VARCHAR2(30 BYTE), 
	"AUTHOR_FIRST_NAME" VARCHAR2(30 BYTE), 
	"RATING" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table PATRONS
--------------------------------------------------------

  CREATE TABLE "LIBRARY_TUTORIAL"."PATRONS" 
   (	"PATRON_ID" NUMBER, 
	"LAST_NAME" VARCHAR2(30 BYTE), 
	"FIRST_NAME" VARCHAR2(30 BYTE), 
	"STREET_ADDRESS" VARCHAR2(50 BYTE), 
	"CITY_STATE_ZIP" VARCHAR2(50 BYTE), 
	"LOCATION" "MDSYS"."SDO_GEOMETRY" 
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table TRANSACTIONS
--------------------------------------------------------

  CREATE TABLE "LIBRARY_TUTORIAL"."TRANSACTIONS" 
   (	"TRANSACTION_ID" NUMBER, 
	"PATRON_ID" NUMBER, 
	"BOOK_ID" VARCHAR2(20 BYTE), 
	"TRANSACTION_DATE" DATE, 
	"TRANSACTION_TYPE" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
REM INSERTING into LIBRARY_TUTORIAL.BOOKS
SET DEFINE OFF;
Insert into LIBRARY_TUTORIAL.BOOKS (BOOK_ID,TITLE,AUTHOR_LAST_NAME,AUTHOR_FIRST_NAME,RATING) values ('1000','Moby Dick','Melville','Herman','10');
Insert into LIBRARY_TUTORIAL.BOOKS (BOOK_ID,TITLE,AUTHOR_LAST_NAME,AUTHOR_FIRST_NAME,RATING) values ('1001','Get Rich Really Fast','Scammer','Ima','1');
Insert into LIBRARY_TUTORIAL.BOOKS (BOOK_ID,TITLE,AUTHOR_LAST_NAME,AUTHOR_FIRST_NAME,RATING) values ('1002','Finding Inner Peace','Blissford','Serenity',null);
Insert into LIBRARY_TUTORIAL.BOOKS (BOOK_ID,TITLE,AUTHOR_LAST_NAME,AUTHOR_FIRST_NAME,RATING) values ('1003','Great Mystery Stories','Whodunit','Rodney','5');
Insert into LIBRARY_TUTORIAL.BOOKS (BOOK_ID,TITLE,AUTHOR_LAST_NAME,AUTHOR_FIRST_NAME,RATING) values ('1004','Software Wizardry','Abugov','D.','10');
REM INSERTING into LIBRARY_TUTORIAL.PATRONS
SET DEFINE OFF;
Insert into LIBRARY_TUTORIAL.PATRONS (PATRON_ID,LAST_NAME,FIRST_NAME,STREET_ADDRESS,CITY_STATE_ZIP,LOCATION) values ('1000','Moreira','Rafael','Joao Candido 18','Vila Ipiranga, POA, BR',null);
Insert into LIBRARY_TUTORIAL.PATRONS (PATRON_ID,LAST_NAME,FIRST_NAME,STREET_ADDRESS,CITY_STATE_ZIP,LOCATION) values ('1001','Moreira','Manuela','Joao Candido 18','Vila Ipiranga, POA, BR',null);
Insert into LIBRARY_TUTORIAL.PATRONS (PATRON_ID,LAST_NAME,FIRST_NAME,STREET_ADDRESS,CITY_STATE_ZIP,LOCATION) values ('1002','Stefanowski','Tais','Joao Candido 18','Vila Ipiranga, POA, BR',null);
REM INSERTING into LIBRARY_TUTORIAL.TRANSACTIONS
SET DEFINE OFF;
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1000','1000','1000',to_date('03/09/16','DD/MM/RR'),'1');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1001','1001','1000',to_date('03/09/16','DD/MM/RR'),'2');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1002','1002','1000',to_date('03/09/16','DD/MM/RR'),'3');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1015','1000','1000',to_date('07/09/16','DD/MM/RR'),'1');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1016','1001','1000',to_date('07/09/16','DD/MM/RR'),'2');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1017','1002','1000',to_date('07/09/16','DD/MM/RR'),'3');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1018','1000','1001',to_date('07/09/16','DD/MM/RR'),'1');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1019','1001','1001',to_date('07/09/16','DD/MM/RR'),'2');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1020','1002','1001',to_date('07/09/16','DD/MM/RR'),'3');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1021','1000','1002',to_date('07/09/16','DD/MM/RR'),'1');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1022','1001','1002',to_date('07/09/16','DD/MM/RR'),'2');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1023','1002','1002',to_date('07/09/16','DD/MM/RR'),'3');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1024','1000','1003',to_date('07/09/16','DD/MM/RR'),'1');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1025','1001','1003',to_date('07/09/16','DD/MM/RR'),'2');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1026','1002','1003',to_date('07/09/16','DD/MM/RR'),'3');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1027','1000','1004',to_date('07/09/16','DD/MM/RR'),'1');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1028','1001','1004',to_date('07/09/16','DD/MM/RR'),'2');
Insert into LIBRARY_TUTORIAL.TRANSACTIONS (TRANSACTION_ID,PATRON_ID,BOOK_ID,TRANSACTION_DATE,TRANSACTION_TYPE) values ('1029','1002','1004',to_date('07/09/16','DD/MM/RR'),'3');
--------------------------------------------------------
--  DDL for Index PATRONS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "LIBRARY_TUTORIAL"."PATRONS_PK" ON "LIBRARY_TUTORIAL"."PATRONS" ("PATRON_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index AUTHOR_TITLE_UNIQUE
--------------------------------------------------------

  CREATE UNIQUE INDEX "LIBRARY_TUTORIAL"."AUTHOR_TITLE_UNIQUE" ON "LIBRARY_TUTORIAL"."BOOKS" ("AUTHOR_LAST_NAME", "TITLE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index BOOKS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "LIBRARY_TUTORIAL"."BOOKS_PK" ON "LIBRARY_TUTORIAL"."BOOKS" ("BOOK_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index TRANSACTIONS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "LIBRARY_TUTORIAL"."TRANSACTIONS_PK" ON "LIBRARY_TUTORIAL"."TRANSACTIONS" ("TRANSACTION_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  Constraints for Table TRANSACTIONS
--------------------------------------------------------

  ALTER TABLE "LIBRARY_TUTORIAL"."TRANSACTIONS" ADD CONSTRAINT "TRANSACTIONS_PK" PRIMARY KEY ("TRANSACTION_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "LIBRARY_TUTORIAL"."TRANSACTIONS" MODIFY ("TRANSACTION_TYPE" CONSTRAINT "TRAN_TYPE_NOT_NULL" NOT NULL ENABLE);
  ALTER TABLE "LIBRARY_TUTORIAL"."TRANSACTIONS" MODIFY ("TRANSACTION_DATE" CONSTRAINT "TRAN_DATE_NOT_NULL" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table PATRONS
--------------------------------------------------------

  ALTER TABLE "LIBRARY_TUTORIAL"."PATRONS" ADD CONSTRAINT "PATRONS_PK" PRIMARY KEY ("PATRON_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "LIBRARY_TUTORIAL"."PATRONS" MODIFY ("LAST_NAME" CONSTRAINT "PATRON_LAST_NOT_NULL" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table BOOKS
--------------------------------------------------------

  ALTER TABLE "LIBRARY_TUTORIAL"."BOOKS" ADD CONSTRAINT "AUTHOR_TITLE_UNIQUE" UNIQUE ("AUTHOR_LAST_NAME", "TITLE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "LIBRARY_TUTORIAL"."BOOKS" ADD CONSTRAINT "BOOKS_PK" PRIMARY KEY ("BOOK_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "LIBRARY_TUTORIAL"."BOOKS" ADD CONSTRAINT "RATING_1_TO_10" CHECK (rating IS NULL OR
      (rating >= 1 and rating <= 10)) ENABLE;
  ALTER TABLE "LIBRARY_TUTORIAL"."BOOKS" MODIFY ("AUTHOR_LAST_NAME" CONSTRAINT "LAST_NAME_NOT_NULL" NOT NULL ENABLE);
  ALTER TABLE "LIBRARY_TUTORIAL"."BOOKS" MODIFY ("TITLE" CONSTRAINT "TITLE_NOT_NULL" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table TRANSACTIONS
--------------------------------------------------------

  ALTER TABLE "LIBRARY_TUTORIAL"."TRANSACTIONS" ADD CONSTRAINT "FOR_KEY_BOOK_ID" FOREIGN KEY ("BOOK_ID")
	  REFERENCES "LIBRARY_TUTORIAL"."BOOKS" ("BOOK_ID") ENABLE;
  ALTER TABLE "LIBRARY_TUTORIAL"."TRANSACTIONS" ADD CONSTRAINT "FOR_KEY_PATRON_ID" FOREIGN KEY ("PATRON_ID")
	  REFERENCES "LIBRARY_TUTORIAL"."PATRONS" ("PATRON_ID") ENABLE;
